# Multi-Agent Workflow

SlopScore.ai does not rely on a single LLM prompt to do everything. Instead, we use a **`Supervisor-Worker`** pattern powered by LangGraph. This allows us to separate concerns and prevent the "context window" from getting cluttered.

## The Supervisor Pattern

The **`Supervisor Agent`** is the manager. It does not do the research itself. Its job is to:

1.  **Receive Input:** Takes the user's video URL.
2.  **Transparency Check:** Immediately calculates the `Transparency Score ($T_s$)` based on the presence of links or metadata.
3.  **Delegate:** Routes data to the specific worker agents below.
4.  **Synthesize:** Aggregates the outputs into the final `SlopScore` using the weighted formula.

## The Worker Agents

### 1. Claim Verifying Agent (The Truth Seeker)
*Responsible for the Claim Score ($C_s$)*

- **Input:** Video Transcript.
- **Task:**
    1.  Extract factual claims.
    2.  **Verbal Citation Extraction:** Identify sources mentioned verbally (e.g., "According to NASA...").
    3.  Query **Google Fact Check Tools API** for existing verdicts.
    4.  Fallback to **Brave Search** for consensus verification.
- **Output:** List of claims with status (`TRUE`, `FALSE`, `UNVERIFIED`) and evidence links.

### 2. Citation Tracer Agent (The Network Auditor)
*Responsible for the Source Score ($S_s$)*

- **Input:** Links from Video Description.
- **Task:**
    1.  **Health Check:** Validate links (404 check) and check Domain Age (WHOIS).
    2.  **Authority Check:** Compare domains against a whitelist (.gov, .edu, Reuters).
    3.  **Echo Chamber Detection:** Trace links 1-level deep to see if Source A cites Source B, and Source B cites Source A (Circular Loop).
- **Output:** A structured list of sources with credibility flags (e.g., `FRESH_DOMAIN`, `ECHO_CHAMBER`, `AUTHORITATIVE`).

## Why This Approach?

| Linear Script | Agentic Workflow (Our Approach) |
| :--- | :--- |
| **Slow:** Runs step-by-step (A then B). | **Fast:** Runs in parallel (Claims and Citations processed simultaneously). |
| **Fragile:** If one step fails, the whole thing crashes. | **Resilient:** If the Citation Tracer fails (e.g., timeout), the Claim Verifier still returns a partial report. |
| **Rigid:** Hard to add new checks. | **Modular:** We can plug in a "Visual Agent" later without breaking the core logic. |